<!DOCTYPE html>
<html lang="ko" class="overflow-hidden">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
        />
        <title>TMAP POI System</title>
        <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
        <link href="/stylesheets/tailwind.css" rel="stylesheet" />

        <!-- Leaflet.js CSS and JS -->
        <link
            rel="stylesheet"
            href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
            integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
            crossorigin=""
        />
        <script
            src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""
        ></script>

        <style>
            .size-15 {
                width: 3.75rem;
                height: 3.75rem;
            }
            .loading {
                display: none;
            }
            .loading.show {
                display: block;
            }
            .search-container {
                width: 100%;
                max-width: 400px;
            }
            /* 검색 바가 지도 위에 확실히 표시되도록 */
            .search-bar {
                z-index: 1000 !important;
                position: fixed !important;
            }
            /* 컨트롤 버튼들도 지도 위에 표시 */
            .control-buttons {
                z-index: 999 !important;
                position: fixed !important;
            }
            /* 상태바도 지도 위에 표시 */
            .status-bar {
                z-index: 998 !important;
                position: fixed !important;
            }
            /* Leaflet 지도 컨테이너 z-index 조정 */
            #map_div {
                z-index: 1 !important;
                position: relative !important;
            }
            /* Leaflet 내부 요소들의 z-index도 제한 */
            .leaflet-map-pane,
            .leaflet-tile-pane,
            .leaflet-overlay-pane,
            .leaflet-shadow-pane,
            .leaflet-marker-pane,
            .leaflet-tooltip-pane,
            .leaflet-popup-pane,
            .leaflet-control-container {
                z-index: auto !important;
            }
            /* 검색바 애니메이션 효과 */
            .search-bar {
                transition: all 0.3s ease;
            }
            /* 모바일에서 검색바 크기 조정 */
            @media (max-width: 640px) {
                .search-container {
                    max-width: calc(100vw - 16px);
                }
            }
        </style>
    </head>

    <body class="overflow-hidden">
        <!-- Loading indicator -->
        <div
            id="loading"
            class="loading fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 bg-white p-4 rounded-lg shadow-lg"
        >
            <div class="flex items-center space-x-2">
                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div>
                <span>처리 중...</span>
            </div>
        </div>

        <!-- Map container -->
        <section class="relative h-dvh w-dvw bg-black/20">
            <div class="size-full object-cover" id="map_div"></div>
        </section>

        <!-- Search bar -->
        <div class="search-bar fixed top-0 left-0 right-0 p-2 bg-white/90 backdrop-blur-sm">
            <div class="search-container mx-auto flex items-center gap-2">
                <div class="input input-bordered flex items-center gap-2 flex-1 bg-white shadow-lg">
                    <input
                        type="search"
                        class="grow bg-transparent"
                        placeholder="POI 검색..."
                        id="searchInput"
                    />
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 16 16"
                        fill="currentColor"
                        class="w-4 h-4 opacity-70"
                    >
                        <path
                            fill-rule="evenodd"
                            d="M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z"
                            clip-rule="evenodd"
                        />
                    </svg>
                </div>
                <button type="button" class="btn btn-primary shadow-lg" id="searchButton">
                    검색
                </button>
            </div>
        </div>

        <!-- Control buttons -->
        <div class="control-buttons fixed bottom-10 left-10 flex flex-col gap-3">
            <button
                type="button"
                class="btn btn-circle btn-lg bg-white hover:bg-gray-100 shadow-lg border-gray-300"
                aria-label="refresh"
                title="데이터 새로고침"
                id="refreshButton"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-6 h-6"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"
                    />
                </svg>
            </button>

            <button
                type="button"
                class="btn btn-circle btn-lg bg-white hover:bg-gray-100 shadow-lg border-gray-300"
                aria-label="import"
                title="엑셀 파일 업로드"
                id="importButton"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-6 h-6"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"
                    />
                </svg>
            </button>

            <button
                type="button"
                class="btn btn-circle btn-lg bg-white hover:bg-gray-100 shadow-lg border-gray-300"
                aria-label="location"
                title="내 위치로 이동"
                id="locationButton"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-6 h-6"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
                    />
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"
                    />
                </svg>
            </button>
        </div>

        <!-- Status bar -->
        <div
            id="statusBar"
            class="status-bar fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm p-2 text-center text-sm text-gray-600"
        >
            지도를 초기화하고 있습니다...
        </div>

        <script src="/javascripts/map.js"></script>
    </body>
</html>
